(function(a){var m={},h={},d=a.each,c=function(b){var e=function(g,k,l){if(typeof g==="object")a.each(g,function(n,o){e(n,o,l)});else if(l===undefined||l===true){b[g]||(b[g]=[]);b[g].push(k)}};return e},f=a.isArray,j=function(b,e,g){a.dform.hasSubscription(b)&&this.each(function(){var k=a(this);d(m[b],function(l,n){n.call(k,e,g)})});return this},i=function(b){var e=b.type,g=this;this.dform("run","[pre]",b,e);d(b,function(k,l){g.dform("run",k,l,e)});this.dform("run","[post]",b,e);return this};a.extend(a,
{keyset:function(b){return a.map(b,function(e,g){return g})},withKeys:function(b,e){var g={};d(e,function(k,l){if(b[l])g[l]=b[l]});return g},withoutKeys:function(b,e){var g={};d(b,function(k,l){~a.inArray(k,e)||(g[k]=l)});return g},dform:{options:{prefix:"ui-dform-"},defaultType:function(b){return a("<"+b.type+">").dform("attr",b)},types:function(b){return b?h[b]:h},addType:c(h),subscribers:function(b){return b?m[b]:m},subscribe:c(m),hasSubscription:function(b){return m[b]?true:false},createElement:function(b){if(!b.type)throw"No element type given! Must always exist.";
var e=b.type,g=null,k=a.withoutKeys(b,["type"]);if(h[e])d(h[e],function(l,n){g=n.call(g,k)});else g=a.dform.defaultType(b);return a(g)},methods:{run:function(b,e,g){if(typeof b!=="string")return i.call(this,b);return j.call(this,b,e,g)},append:function(b,e){if(e&&a.dform.converters&&a.isFunction(a.dform.converters[e]))b=a.dform.converters[e](b);e=a.dform.createElement(b);this.append(e);e.dform("run",b)},attr:function(b,e){var g=a.keyset(m);f(e)&&a.merge(g,e);this.attr(a.withoutKeys(b,g))},ajax:function(b,
e,g){g={error:g,url:b};var k=this;typeof b!=="string"&&a.extend(g,b);g.success=function(l){k.dform(l);e&&e.call(k,l)};a.ajax(g)},init:function(b,e){b=b.type?b:a.extend({type:"form"},b);if(e&&a.dform.converters&&a.isFunction(a.dform.converters[e]))b=a.dform.converters[e](b);if(this.is(b.type)){this.dform("attr",b);this.dform("run",b)}else this.dform("append",b)}}}});a.fn.dform=function(b,e,g){var k=a(this);if(a.dform.methods[b])a.dform.methods[b].apply(k,Array.prototype.slice.call(arguments,1));else typeof b===
"string"?a.dform.methods.ajax.call(k,{url:b,dataType:"json"},e,g):a.dform.methods.init.apply(k,arguments);return this}})(jQuery);
(function(a){var m=a.each,h=function(c,f){return function(j){return a(c).dform("attr",j,f)}},d=function(c){var f=this;if(a.isPlainObject(c))f.dform("append",c);else a.isArray(c)?m(c,function(j,i){f.dform("append",i)}):f.html(c)};a.dform.addType({container:h("<div>"),text:h('<input type="text" />'),password:h('<input type="password" />'),submit:h('<input type="submit" />'),reset:h('<input type="reset" />'),hidden:h('<input type="hidden" />'),radio:h('<input type="radio" />'),checkbox:h('<input type="checkbox" />'),
file:h('<input type="file" />'),number:h('<input type="number" />'),url:h('<input type="url" />'),tel:h('<input type="tel" />'),email:h('<input type="email" />'),checkboxes:h("<div>",["name"]),radiobuttons:h("<div>",["name"])});a.dform.subscribe({"class":function(c){this.addClass(c)},html:d,elements:d,value:function(c){this.val(c)},css:function(c){this.css(c)},options:function(c,f){var j=this;if((f==="select"||f==="optgroup")&&typeof c!=="string")m(c,function(i,b){i={type:"option",value:i};if(typeof b===
"string")i.html=b;if(typeof b==="object")i=a.extend(i,b);j.dform("append",i)});else if(f==="checkboxes"||f==="radiobuttons")m(c,function(i,b){var e=f==="radiobuttons"?{type:"radio"}:{type:"checkbox"};if(typeof b==="string")e.caption=b;else a.extend(e,b);e.value=i;j.dform("append",e)})},caption:function(c,f){var j={};if(typeof c==="string")j.html=c;else a.extend(j,c);if(f=="fieldset"){j.type="legend";this.dform("append",j)}else{j.type="label";if(this.attr("id"))j["for"]=this.attr("id");c=a(a.dform.createElement(j));
f==="checkbox"||f==="radio"?this.parent().append(a(c)):c.insertBefore(this);c.dform("run",j)}},type:function(c,f){a.dform.options.prefix&&this.addClass(a.dform.options.prefix+f)},url:function(){},"[post]":function(c,f){if(f==="checkboxes"||f==="radiobuttons")this.children("[type="+(f==="checkboxes"?"checkbox":"radio")+"]").each(function(){a(this).attr("name",c.name)})}})})(jQuery);
(function(a){var m=function(d,c){return a.withKeys(c,a.keyset(a.ui[d].prototype.options))},h=function(d,c){c=c;for(var f=0;f<d.length;f++){c=c[d[f]];if(!c)return null}return c};a.dform.addType("progressbar",function(d){return a("<div>").dform("attr",d).progressbar(m("progressbar",d))},a.isFunction(a.fn.progressbar));a.dform.addType("slider",function(d){return a("<div>").dform("attr",d).slider(m("slider",d))},a.isFunction(a.fn.slider));a.dform.addType("accordion",function(d){return a("<div>").dform("attr",
d)},a.isFunction(a.fn.accordion));a.dform.addType("tabs",function(d){return a("<div>").dform("attr",d)},a.isFunction(a.fn.tabs));a.dform.subscribe("entries",function(d,c){if(c=="accordion"){var f=this;a.each(d,function(j,i){j=a.extend({type:"div"},i);a(f).dform("append",j);if(i.caption){i=a(f).children("div:last").prev();i.replaceWith('<h3><a href="#">'+i.html()+"</a></h3>")}})}},a.isFunction(a.fn.accordion));a.dform.subscribe("entries",function(d,c){if(c=="tabs"){var f=this;this.append("<ul>");var j=
a(f).children("ul:first");a.each(d,function(i,b){i=b.id?b.id:i;a.extend(b,{type:"container",id:i});a(f).dform("append",b);b=a(f).children("div:last").prev();a(b).wrapInner(a("<a>").attr("href","#"+i));a(j).append(a("<li>").wrapInner(b))})}},a.isFunction(a.fn.tabs));a.dform.subscribe("dialog",function(d){this.dialog(d)},a.isFunction(a.fn.dialog));a.dform.subscribe("resizable",function(d){this.resizable(d)},a.isFunction(a.fn.resizable));a.dform.subscribe("datepicker",function(d,c){c=="text"&&this.datepicker(d)},
a.isFunction(a.fn.datepicker));a.dform.subscribe("autocomplete",function(d,c){c=="text"&&this.autocomplete(d)},a.isFunction(a.fn.autocomplete));a.dform.subscribe("[post]",function(d,c){if(this.parents("form").hasClass("ui-widget")){if((c==="button"||c==="submit")&&a.isFunction(a.fn.button))this.button();~a.inArray(c,["text","textarea","password","fieldset"])&&this.addClass("ui-widget-content ui-corner-all")}if(c==="accordion"||c==="tabs")this[c](m(c,d))});a.dform.subscribe("[pre]",function(d,c){if(c==
"form"){c={};if(this.hasClass("ui-widget"))c={highlight:function(f){a(f).addClass("ui-state-highlight")},unhighlight:function(f){a(f).removeClass("ui-state-highlight")}};typeof d.validate=="object"&&a.extend(c,d.validate);this.validate(c)}},a.isFunction(a.fn.validate));a.dform.subscribe("validate",function(d,c){c!="form"&&this.rules("add",d)},a.isFunction(a.fn.validate));a.dform.subscribe("ajax",function(d,c){c==="form"&&this.ajaxForm(d)},a.isFunction(a.fn.ajaxForm));a.dform.subscribe("html",function(d){if(typeof d===
"string"){d=d.split(".");var c=Globalize.localize(d.shift());if(c=h(d,c))a(this).html(c)}},typeof Globalize!=="undefined"&&a.isFunction(Globalize.localize));a.dform.subscribe("options",function(d,c){if(c==="select"&&typeof d==="string"){a(this).html("");d=d.split(".");var f=Globalize.localize(d.shift());if(f=h(d,f))a(this).dform("run","options",f,c)}},typeof Globalize!=="undefined"&&a.isFunction(Globalize.localize))})(jQuery);
